"use strict";(self["webpackChunkproject"]=self["webpackChunkproject"]||[]).push([[442],{9442:function(e,t,r){r.r(t),r.d(t,{default:function(){return H}});var i=r(6252),s=r(9963);const n={class:"checkout"},a={class:"container"},o={class:"checkoutBlock"},c=(0,i._)("h1",{class:"checkoutBlock__h"},"Checkout",-1),d={class:"checkoutBlock__main-btns"},l={class:"checkoutBlock__main-btns-btn"},p=["disabled"],u={key:0},m=(0,i._)("div",{class:"loading-overlay"},[(0,i._)("div",{class:"loading-circle"})],-1),h=[m],_={key:1},y={key:2};function b(e,t,r,m,b,k){const w=(0,i.up)("router-link"),g=(0,i.up)("Order");return(0,i.wg)(),(0,i.iD)("section",n,[(0,i._)("div",a,[(0,i._)("div",o,[c,(0,i._)("form",{onSubmit:t[7]||(t[7]=(0,s.iM)(((...e)=>k.submitOrder&&k.submitOrder(...e)),["prevent"])),class:"checkoutBlock__main"},[(0,i.wy)((0,i._)("input",{type:"text",placeholder:"Имя",id:"name",name:"name","onUpdate:modelValue":t[0]||(t[0]=e=>b.order.name=e),autocomplete:"none",required:""},null,512),[[s.nr,b.order.name]]),(0,i.wy)((0,i._)("input",{type:"text",placeholder:"Номер телефона",id:"phone",name:"phone","onUpdate:modelValue":t[1]||(t[1]=e=>b.order.phone=e),autocomplete:"none",required:""},null,512),[[s.nr,b.order.phone]]),(0,i.wy)((0,i._)("input",{type:"text",placeholder:"Адрес",id:"address",name:"address","onUpdate:modelValue":t[2]||(t[2]=e=>b.order.address=e),autocomplete:"none",required:""},null,512),[[s.nr,b.order.address]]),(0,i.wy)((0,i._)("input",{type:"text",placeholder:"Город",id:"city",name:"city","onUpdate:modelValue":t[3]||(t[3]=e=>b.order.city=e),autocomplete:"none",required:""},null,512),[[s.nr,b.order.city]]),(0,i.wy)((0,i._)("input",{type:"text",placeholder:"Электронная почта",id:"email",name:"email","onUpdate:modelValue":t[4]||(t[4]=e=>b.order.email=e),required:""},null,512),[[s.nr,b.order.email]]),(0,i._)("div",d,[(0,i._)("div",l,[0==b.receipt?((0,i.wg)(),(0,i.iD)("button",{key:0,class:"checkoutBlock__main-btns-btn1",type:"button",onClick:t[5]||(t[5]=(...e)=>k.openReceipt&&k.openReceipt(...e))}," Показать заказы ")):1==b.receipt?((0,i.wg)(),(0,i.iD)("button",{key:1,class:"checkoutBlock__main-btns-btn1",type:"button",onClick:t[6]||(t[6]=(...e)=>k.closeReceipt&&k.closeReceipt(...e))}," Закрыть заказ ")):(0,i.kq)("",!0),(0,i.Wm)(w,{to:"/cart",class:"checkoutBlock__main-btns-btn1"},{default:(0,i.w5)((()=>[(0,i.Uk)("Вернуться в корзину")])),_:1})]),(0,i._)("button",{type:"submit",id:"submit",disabled:b.submittingOrder||k.isCartEmpty},[b.submittingOrder?((0,i.wg)(),(0,i.iD)("span",u,h)):k.isCartEmpty?((0,i.wg)(),(0,i.iD)("span",_,"Корзина пуста")):((0,i.wg)(),(0,i.iD)("span",y,"Заказать"))],8,p)])],32),(0,i.wy)((0,i.Wm)(g,null,null,512),[[s.F8,b.receipt]])])])])}var k=r(3577);const w={key:0,class:"receipt"},g=(0,i._)("h3",{class:"receipt__h"},"Заказ",-1),v={class:"receipt__orders"},f={key:0,class:"receipt__p"},q={key:1,class:"receipt__p"},D={class:"receipt__subtotal"};function O(e,t,r,s,n,a){return e.cart?((0,i.wg)(),(0,i.iD)("div",w,[g,(0,i._)("div",v,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.cart.line_items,(e=>((0,i.wg)(),(0,i.iD)("div",{class:"receipt__main",key:e.id},[e.quantity>0?((0,i.wg)(),(0,i.iD)("p",f,(0,k.zw)(e.name)+" - "+(0,k.zw)(e.quantity),1)):(0,i.kq)("",!0),e.quantity>0?((0,i.wg)(),(0,i.iD)("p",q,(0,k.zw)(e.price.formatted)+"0 Сум",1)):(0,i.kq)("",!0)])))),128))]),(0,i._)("h3",D,(0,k.zw)(e.cart.subtotal.formatted)+"0 Сум",1)])):(0,i.kq)("",!0)}var C=r(3907),x={created(){this.getCart()},computed:{...(0,C.rn)(["cart"])},methods:{...(0,C.nv)(["getCart"])}},j=r(3744);const E=(0,j.Z)(x,[["render",O]]);var $=E;const R={_origin:"https://api.emailjs.com"},V=(e,t="https://api.emailjs.com")=>{R._userID=e,R._origin=t},B=(e,t,r)=>{if(!e)throw"The user ID is required. Visit https://dashboard.emailjs.com/admin/integration";if(!t)throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!r)throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates";return!0};class T{constructor(e){this.status=e.status,this.text=e.responseText}}const I=(e,t,r={})=>new Promise(((i,s)=>{const n=new XMLHttpRequest;n.addEventListener("load",(({target:e})=>{const t=new T(e);200===t.status||"OK"===t.text?i(t):s(t)})),n.addEventListener("error",(({target:e})=>{s(new T(e))})),n.open("POST",R._origin+e,!0),Object.keys(r).forEach((e=>{n.setRequestHeader(e,r[e])})),n.send(t)})),M=(e,t,r,i)=>{const s=i||R._userID;B(s,e,t);const n={lib_version:"3.2.0",user_id:s,service_id:e,template_id:t,template_params:r};return I("/api/v1.0/email/send",JSON.stringify(n),{"Content-type":"application/json"})},S=e=>{let t;if(t="string"===typeof e?document.querySelector(e):e,!t||"FORM"!==t.nodeName)throw"The 3rd parameter is expected to be the HTML form element or the style selector of form";return t},U=(e,t,r,i)=>{const s=i||R._userID,n=S(r);B(s,e,t);const a=new FormData(n);return a.append("lib_version","3.2.0"),a.append("service_id",e),a.append("template_id",t),a.append("user_id",s),I("/api/v1.0/email/send-form",a)};var z={init:V,send:M,sendForm:U},F={components:{Order:$},data(){return{receipt:!1,order:{name:"",phone:"",address:"",city:"",email:""},submittingOrder:!1}},methods:{openReceipt(){this.receipt=!0},closeReceipt(){this.receipt=!1},async submitOrder(){const e=new Map;this.cart.line_items.forEach((t=>{t.quantity>0&&e.set(t.product_name,t.quantity)}));let t="";e.forEach(((e,r)=>{t+=`${r} - ${e}, `}));const r=`\n      Name: ${this.order.name}\n      Phone: ${this.order.phone}\n      Address: ${this.order.address}\n      City: ${this.order.city}\n      Email: ${this.order.email}\n      Products: ${t}\n      Subtotal:${JSON.stringify(this.cart.subtotal.formatted)} Сум\n    `;try{this.submittingOrder=!0;await z.send("service_n55zyyi","template_nxxbltp",{to_email:this.order.email,message:r},"cMjsZgT6VKlPlYEmF");await this.$store.dispatch("clearCart"),this.order.name="",this.order.phone="",this.order.address="",this.order.city="",this.order.email="",alert("Ваш заказ отправлен, мы свяжемся с вами в ближайшее время!")}catch(i){alert("Ошибка! ваш заказ не отправлен попробуйте еще раз или позвоните по номеру  951234567!")}finally{this.submittingOrder=!1}}},computed:{...(0,C.rn)(["cart"]),isCartEmpty(){return!this.cart||0===this.cart.total_items}}};const P=(0,j.Z)(F,[["render",b]]);var H=P}}]);
//# sourceMappingURL=442.3730edc2.js.map